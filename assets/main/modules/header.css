/* =========================================
   Module: Header (完美修复版)
   ========================================= */

/* 1. 容器样式 */
.glass-header {
    position: sticky;
    top: 20px;
    z-index: 1000;
    width: auto;
    max-width: var(--container-width);
    margin: 0 auto 30px auto;
    
    background: var(--glass-bg);
    backdrop-filter: var(--glass-blur);
    -webkit-backdrop-filter: var(--glass-blur);
    border: 1px solid var(--glass-border);
    box-shadow: var(--glass-shadow);
    border-radius: var(--radius-l);
}

.header-inner {
    height: var(--header-height);
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0 24px;
}

/* 2. 左侧 Logo */
.header-left {
    display: flex;
    align-items: center;
    gap: 15px;
    flex-shrink: 0; /* 防止 Logo 被挤压 */
}

.logo-link {
    display: flex;
    align-items: center;
    text-decoration: none !important;
    color: var(--text-main);
}

.logo-text {
    font-size: 18px;
    letter-spacing: -0.5px;
}

/* 3. 中间导航 (禁止换行修复) */
.desktop-nav {
    display: flex;
    align-items: center;
    gap: 5px; 
    /* 关键修复：允许横向滚动防止布局炸裂，或者隐藏溢出 */
    overflow-x: auto; 
    overflow-y: hidden;
    /* 隐藏滚动条 */
    scrollbar-width: none; 
    -ms-overflow-style: none;
    margin: 0 20px; /* 给左右留点空隙 */
}

.desktop-nav::-webkit-scrollbar { 
    display: none; 
}

.nav-link {
    font-size: 15px;
    font-weight: 600;
    color: var(--text-main);
    padding: 8px 12px;
    border-radius: var(--radius-s);
    transition: all 0.2s ease;
    
    /* === 核心修复：禁止文字换行 === */
    white-space: nowrap !important;
    flex-shrink: 0; /* 禁止被压缩 */
    
    /* 再次确保无下划线 */
    text-decoration: none !important;
    border: none !important;
}

.nav-link:hover, .nav-link.active {
    background: rgba(0, 0, 0, 0.05);
    color: var(--accent-color);
}

[data-bs-theme="dark"] .nav-link:hover {
    background: rgba(255, 255, 255, 0.1);
}

/* 4. 右侧搜索框 (去古老感修复) */
.header-right {
    display: flex;
    align-items: center;
    gap: 12px;
    flex-shrink: 0; /* 防止搜索框被挤压 */
}

.search-form {
    position: relative;
    width: 200px;
    display: flex;
    align-items: center;
}

/* 针对 input 的强力美化 */
.search-input {
    width: 100%;
    height: 36px;
    
    /* === 核心修复：去除古老边框 === */
    appearance: none !important;  /* 去除系统默认外观 */
    -webkit-appearance: none !important;
    background: rgba(0, 0, 0, 0.06) !important; /* 强制背景色 */
    border: 1px solid transparent !important;   /* 强制无边框 */
    border-radius: 999px !important;            /* 强制圆角 */
    outline: none !important;                   /* 去除聚焦黑框 */
    
    padding: 0 12px 0 34px; /*文字缩进，给图标留位置*/
    font-size: 13px;
    color: var(--text-main);
    transition: all 0.2s ease;
}

/* 深色模式适配 */
[data-bs-theme="dark"] .search-input {
    background: rgba(255, 255, 255, 0.15) !important;
    color: #fff;
}

.search-input:focus {
    background: var(--bg-color) !important;
    border-color: var(--accent-color) !important;
    box-shadow: 0 0 0 3px rgba(0, 113, 227, 0.1);
}

.search-icon {
    position: absolute;
    left: 10px;
    top: 50%;
    transform: translateY(-50%);
    font-size: 16px;
    color: var(--text-secondary);
    pointer-events: none;
    z-index: 2; /* 确保图标浮在 input 上面 */
}

/* 移动端菜单按钮 */
.mobile-menu-trigger {
    display: none;
    font-size: 20px;
    color: var(--text-main);
    background: none;
    border: none;
    padding: 5px;
}
/* =========================================
   Mobile Navigation Fix (手机端抽屉重构 - 修复Bug + 美化)
   ========================================= */
@media (max-width: 768px) {
    
    /* 1. 修复：强制显示“三道杠”菜单按钮 */
    .mobile-menu-trigger {
        display: flex !important;
        align-items: center;
        justify-content: center;
        width: 40px;
        height: 40px;
        font-size: 22px;
        color: var(--text-main);
        background: transparent;
        border: none;
        margin-right: 10px;
        z-index: 1002;
        cursor: pointer;
        border-radius: 8px;
        transition: background 0.2s;
    }
    .mobile-menu-trigger:active {
        background: rgba(0,0,0,0.05);
    }

    /* 2. 隐藏 Header 右侧原本的搜索框 */
    .header-right {
        display: none !important;
    }

    /* 3. 将导航菜单改造为“侧滑抽屉” (风格化 + Bug修复) */
    .desktop-nav {
        /* === 核心 Bug 修复 === */
        position: fixed;
        top: 0;
        left: 0; 
        transform: translateX(-100%); 
        
        /* ★★★ 关键修复：强制清除电脑端的左右边距 ★★★ */
        margin: 0 !important; 
        
        /* === 尺寸设置 === */
        width: 80vw; 
        max-width: 300px; 
        height: 100vh;
        
        /* === 风格美化 === */
        background: rgba(255, 255, 255, 0.95); /* 高浓度背景 */
        border-radius: 0 30px 30px 0; /* 只圆润右边，左边贴墙 */
        
        backdrop-filter: blur(25px); 
        -webkit-backdrop-filter: blur(25px);
        border-right: 1px solid var(--glass-border); 
        box-shadow: 10px 0 50px rgba(0,0,0,0.15); 
        
        /* === 布局 === */
        display: flex !important;
        flex-direction: column;
        align-items: flex-start;
        padding: 100px 30px 40px 30px; 
        
        /* === 动画 === */
        transition: transform 0.35s cubic-bezier(0.33, 1, 0.68, 1); 
        z-index: 999;
        overflow-y: auto;
    }

    /* 深色模式适配 */
    [data-bs-theme="dark"] .desktop-nav {
        background: rgba(20, 20, 23, 0.95); 
    }

    /* 4. 激活状态：滑出来 */
    .desktop-nav.active {
        transform: translateX(0); /* 因为 margin 清零了，现在会严丝合缝地贴在左边 */
    }

    /* 5. 链接样式优化 */
    .nav-link {
        width: 100%;
        font-size: 17px; /* 字体加大 */
        font-weight: 600;
        padding: 18px 0; /* 增加点击区域 */
        border-bottom: 1px solid rgba(0,0,0,0.05); /* 极细分割线 */
        text-align: left;
        color: var(--text-main);
        white-space: normal !important;
        display: flex;
        justify-content: space-between; /* 如果以后加箭头可以用 */
        align-items: center;
    }
    
    /* 去掉最后一个链接的底边框 */
    .nav-link:last-of-type {
        border-bottom: none;
    }

    /* 6. 手机端搜索框美化 (拒绝拉跨) */
    .mobile-only-search {
        display: block !important;
        margin-top: 40px; /* 离上方链接远一点 */
        width: 100%;
    }
    
    .mobile-only-search form {
        position: relative;
    }
    
    .mobile-only-search input {
        width: 100%;
        height: 46px; /* 加高 */
        border-radius: 23px; /* 胶囊圆角 */
        border: 1px solid var(--glass-border);
        
        /* 内部样式 */
        background: rgba(0,0,0,0.03); /* 极淡的背景 */
        padding-left: 20px;
        padding-right: 50px; /* 给按钮留位置 */
        font-size: 15px;
        color: var(--text-main);
        outline: none;
        transition: all 0.2s;
    }
    
    /* 聚焦时 */
    .mobile-only-search input:focus {
        background: var(--bg-color);
        border-color: var(--accent-color);
        box-shadow: 0 4px 15px rgba(0, 113, 227, 0.15);
    }

    /* 搜索按钮美化 */
    .mobile-only-search button {
        position: absolute;
        right: 6px; 
        top: 6px;
        height: 34px; 
        width: 34px;
        border: none;
        background: var(--accent-color); /* 主题色背景 */
        color: white;
        border-radius: 50%; /* 圆形按钮 */
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    
    .mobile-only-search button i {
        font-size: 16px;
    }
    
    /* 深色模式适配 */
    [data-bs-theme="dark"] .mobile-only-search input {
        background: rgba(255,255,255,0.08);
    }
}

/* 电脑端隐藏那个额外的搜索框 */
@media (min-width: 769px) {
    .mobile-only-search { display: none; }
}